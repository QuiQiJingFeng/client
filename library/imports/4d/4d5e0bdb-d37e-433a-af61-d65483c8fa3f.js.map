{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [
    "protobuf",
    "require",
    "event_dispatcher",
    "network",
    "Init",
    "self",
    "socket",
    "Connect",
    "url",
    "WebSocket",
    "onopen",
    "event",
    "cc",
    "log",
    "onerror",
    "onclose",
    "console",
    "onmessage",
    "sys",
    "isNative",
    "msg",
    "decode",
    "data",
    "obj",
    "JSON",
    "parse",
    "event_name",
    "Object",
    "keys",
    "DispatchEvent",
    "fileReader",
    "FileReader",
    "onload",
    "progressEvent",
    "result",
    "readAsArrayBuffer",
    "DisConnect",
    "Send",
    "buffer",
    "encode",
    "send",
    "module",
    "exports"
  ],
  "mappings": ";;AAAA,IAAIA,WAAWC,QAAQ,UAAR,CAAf;AACA,IAAIC,mBAAmBD,QAAQ,kBAAR,CAAvB;AACA,IAAIE,UAAU,EAAd;;AAEAA,QAAQC,IAAR,GAAe,YAAW;AACtB,QAAIC,OAAO,IAAX;AACAA,SAAKC,MAAL,GAAc,IAAd;;AAEAN,aAASI,IAAT;;AAEAC,SAAKE,OAAL;AACH,CAPD;;AASAJ,QAAQI,OAAR,GAAkB,YAAW;AACzB,QAAIF,OAAO,IAAX;AACA,QAAIG,MAAM,yBAAV;AACA,QAAGH,KAAKC,MAAR,EAAgB;AAChBD,SAAKC,MAAL,GAAc,IAAIG,SAAJ,CAAcD,GAAd,CAAd;AACAH,SAAKC,MAAL,CAAYI,MAAZ,GAAqB,UAAUC,KAAV,EAAiB;AAClCC,WAAGC,GAAH,CAAO,QAAP;AACH,KAFD;;AAIAR,SAAKC,MAAL,CAAYQ,OAAZ,GAAsB,UAAUH,KAAV,EAAiB;AACnCC,WAAGC,GAAH,CAAO,sBAAP,EAA8BF,KAA9B;AACH,KAFD;;AAIAN,SAAKC,MAAL,CAAYS,OAAZ,GAAsB,UAAUJ,KAAV,EAAiB;AACnCK,gBAAQH,GAAR,CAAY,wBAAZ,EAAqCF,KAArC;AACH,KAFD;;AAIAN,SAAKC,MAAL,CAAYW,SAAZ,GAAwB,UAAUN,KAAV,EAAiB;AACrC,YAAGC,GAAGM,GAAH,CAAOC,QAAV,EAAoB;AAChB,gBAAIC,MAAMpB,SAASqB,MAAT,CAAgBV,MAAMW,IAAtB,CAAV;AACA,gBAAIC,MAAMC,KAAKC,KAAL,CAAWL,GAAX,CAAV;AACA,gBAAIM,aAAaC,OAAOC,IAAP,CAAYL,GAAZ,EAAiB,CAAjB,CAAjB;AACArB,6BAAiB2B,aAAjB,CAA+BH,UAA/B,EAA0CH,IAAIG,UAAJ,CAA1C;AACH,SALD,MAKM;AACE,gBAAII,aAAa,IAAIC,UAAJ,EAAjB;AACAD,uBAAWE,MAAX,GAAqB,UAASC,aAAT,EAAwB;AACzC,oBAAI5B,OAAO,IAAX;AACA,oBAAIe,MAAMpB,SAASqB,MAAT,CAAgBhB,KAAK6B,MAArB,CAAV;AACA,oBAAIX,MAAMC,KAAKC,KAAL,CAAWL,GAAX,CAAV;AACA,oBAAIM,aAAaC,OAAOC,IAAP,CAAYL,GAAZ,EAAiB,CAAjB,CAAjB;AACArB,iCAAiB2B,aAAjB,CAA+BH,UAA/B,EAA0CH,IAAIG,UAAJ,CAA1C;AACH,aAND;AAOAI,uBAAWK,iBAAX,CAA6BxB,MAAMW,IAAnC;AACP;AACJ,KAjBD;AAkBH,CAnCD;;AAqCAnB,QAAQiC,UAAR,GAAqB,YAAW;AAC5B,QAAI/B,OAAO,IAAX;AACH,CAFD;;AAIAF,QAAQkC,IAAR,GAAe,UAASjB,GAAT,EAAc;AACzB,QAAIf,OAAO,IAAX;AACA,QAAG,CAACA,KAAKC,MAAT,EAAiB;AACjB,QAAIgC,SAAStC,SAASuC,MAAT,CAAgBnB,GAAhB,CAAb;AACAf,SAAKC,MAAL,CAAYkC,IAAZ,CAAiBF,MAAjB;AACH,CALD;AAMAG,OAAOC,OAAP,GAAiBvC,OAAjB",
  "file": "unknown",
  "sourcesContent": [
    "let protobuf = require(\"protobuf\");\nlet event_dispatcher = require(\"event_dispatcher\");\nlet network = {};\n\nnetwork.Init = function() {\n    let self = this;\n    self.socket = null;\n\n    protobuf.Init();\n\n    self.Connect();\n}\n\nnetwork.Connect = function() {\n    let self = this;\n    let url = \"ws://192.168.1.100:8888\";\n    if(self.socket) return;\n    self.socket = new WebSocket(url);\n    self.socket.onopen = function (event) {\n        cc.log(\"onopen\");\n    };\n\n    self.socket.onerror = function (event) {\n        cc.log(\"-------------onerror\",event);\n    };\n\n    self.socket.onclose = function (event) {\n        console.log(\"---------------onclose\",event);\n    };\n    \n    self.socket.onmessage = function (event) {\n        if(cc.sys.isNative) {\n            let msg = protobuf.decode(event.data);\n            let obj = JSON.parse(msg);\n            let event_name = Object.keys(obj)[0];\n            event_dispatcher.DispatchEvent(event_name,obj[event_name]);\n        }else {\n                var fileReader = new FileReader();  \n                fileReader.onload  = function(progressEvent) { \n                    let self = this; \n                    let msg = protobuf.decode(self.result);  \n                    let obj = JSON.parse(msg);\n                    let event_name = Object.keys(obj)[0];\n                    event_dispatcher.DispatchEvent(event_name,obj[event_name]);\n                };  \n                fileReader.readAsArrayBuffer(event.data); \n        }\n    };\n}\n\nnetwork.DisConnect = function() {\n    let self = this;\n}\n\nnetwork.Send = function(msg) {\n    let self = this;\n    if(!self.socket) return;\n    let buffer = protobuf.encode(msg);\n    self.socket.send(buffer);\n}\nmodule.exports = network;\n"
  ]
}