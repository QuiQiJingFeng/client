{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [
    "protobuf",
    "require",
    "network",
    "Init",
    "self",
    "socket",
    "Connect",
    "console",
    "log",
    "url",
    "WebSocket",
    "onopen",
    "event",
    "onerror",
    "onclose",
    "onmessage",
    "data",
    "fileReader",
    "FileReader",
    "onload",
    "progressEvent",
    "arrayBuffer",
    "result",
    "msg",
    "decode",
    "cc",
    "JSON",
    "stringify",
    "readAsArrayBuffer",
    "DisConnect",
    "Send",
    "buffer",
    "encode",
    "send",
    "module",
    "exports"
  ],
  "mappings": ";;AAAA,IAAIA,WAAWC,QAAQ,UAAR,CAAf;;AAEA,IAAIC,UAAU,EAAd;;AAEAA,QAAQC,IAAR,GAAe,YAAW;AACtB,QAAIC,OAAO,IAAX;AACAA,SAAKC,MAAL,GAAc,IAAd;;AAEAL,aAASG,IAAT;;AAEAC,SAAKE,OAAL;AACH,CAPD;;AASAJ,QAAQI,OAAR,GAAkB,YAAW;AACzBC,YAAQC,GAAR,CAAY,iBAAZ;AACA,QAAIJ,OAAO,IAAX;AACA,QAAIK,MAAM,qBAAV;AACA,QAAGL,KAAKC,MAAR,EAAgB;AAChBD,SAAKC,MAAL,GAAc,IAAIK,SAAJ,CAAcD,GAAd,CAAd;AACAL,SAAKC,MAAL,CAAYM,MAAZ,GAAqB,UAAUC,KAAV,EAAiB;AAClCL,gBAAQC,GAAR,CAAY,QAAZ;AACH,KAFD;;AAIA;AACAJ,SAAKC,MAAL,CAAYQ,OAAZ,GAAsB,UAAUD,KAAV,EAAiB;AACnCL,gBAAQC,GAAR,CAAY,sBAAZ,EAAmCI,KAAnC;AACH,KAFD;;AAIA;AACAR,SAAKC,MAAL,CAAYS,OAAZ,GAAsB,UAAUF,KAAV,EAAiB;AACnCL,gBAAQC,GAAR,CAAY,wBAAZ,EAAqCI,KAArC;AACH,KAFD;AAGA;AACA;AACAR,SAAKC,MAAL,CAAYU,SAAZ,GAAwB,UAAUH,KAAV,EAAiB;AACrCL,gBAAQC,GAAR,CAAY,wBAAZ,EAAqCI,MAAMI,IAA3C;AACA;AACA;AACA;AACA,YAAIC,aAAa,IAAIC,UAAJ,EAAjB;AACAD,mBAAWE,MAAX,GAAqB,UAASC,aAAT,EAAwB;AACzC,gBAAIC,cAAc,KAAKC,MAAvB,CADyC,CACV;AAC/B,gBAAIC,MAAMvB,SAASwB,MAAT,CAAgBH,WAAhB,CAAV;AACAI,eAAGjB,GAAH,CAAO,QAAP,EAAgBkB,KAAKC,SAAL,CAAeJ,GAAf,CAAhB;AACH,SAJD;AAKAN,mBAAWW,iBAAX,CAA6BhB,MAAMI,IAAnC;AACH,KAZD;AAaH,CAlCD;;AAoCAd,QAAQ2B,UAAR,GAAqB,YAAW;AAC5B,QAAIzB,OAAO,IAAX;AACH,CAFD;;AAIAF,QAAQ4B,IAAR,GAAe,UAASP,GAAT,EAAc;AACzB,QAAInB,OAAO,IAAX;AACA,QAAG,CAACA,KAAKC,MAAT,EAAiB;AACjB,QAAI0B,SAAS/B,SAASgC,MAAT,CAAgBT,GAAhB,CAAb;AACAnB,SAAKC,MAAL,CAAY4B,IAAZ,CAAiBF,MAAjB;AACH,CALD;AAMAG,OAAOC,OAAP,GAAiBjC,OAAjB",
  "file": "unknown",
  "sourcesContent": [
    "let protobuf = require(\"protobuf\");\n\nlet network = {};\n\nnetwork.Init = function() {\n    let self = this;\n    self.socket = null;\n\n    protobuf.Init();\n\n    self.Connect();\n}\n\nnetwork.Connect = function() {\n    console.log(\"FYD=====CONNECT\");\n    let self = this;\n    let url = \"ws://127.0.0.1:8888\";\n    if(self.socket) return;\n    self.socket = new WebSocket(url);\n    self.socket.onopen = function (event) {\n        console.log(\"onopen\");\n    };\n\n    // GSocket.onerror = function (event) {\n    self.socket.onerror = function (event) {\n        console.log(\"-------------onerror\",event);\n    };\n\n    // GSocket.onclose = function (event) {\n    self.socket.onclose = function (event) {\n        console.log(\"---------------onclose\",event);\n    };\n    //需要判断是原生环境还是浏览器环境，如果是浏览器环境websocket收到的data将是BLOB类型，需要将BLOB类型转换为ArrayBuffer\n    // GSocket.onmessage = function (event) {\n    self.socket.onmessage = function (event) {\n        console.log(\"onmessage>>>>>>>>>>>>>\",event.data);\n        // console.log(event);\n        // let msg = protobuf.decode(buffer);\n        // cc.log(\"data=>\",JSON.stringify(msg));\n        var fileReader = new FileReader();  \n        fileReader.onload  = function(progressEvent) {  \n            var arrayBuffer = this.result; // arrayBuffer即为blob对应的arrayBuffer \n            let msg = protobuf.decode(arrayBuffer);  \n            cc.log(\"data=>\",JSON.stringify(msg));\n        };  \n        fileReader.readAsArrayBuffer(event.data);  \n    };\n}\n\nnetwork.DisConnect = function() {\n    let self = this;\n}\n\nnetwork.Send = function(msg) {\n    let self = this;\n    if(!self.socket) return;\n    let buffer = protobuf.encode(msg);\n    self.socket.send(buffer);\n}\nmodule.exports = network;\n"
  ]
}